schema-version: 1.0

type: provider

var:
  memory: 512
  cpus: 1
  ifname: eth1
#hostVersion is set by xbee
  hostVersion:
#ova is defined by the system pack used to launch the vm
  ova:

const:
  path: s3.eu-west-3.amazonaws.com/xbee.repository/providers


provision:
  - url:
      from: https://download.virtualbox.org/virtualbox/{{ .pack.hostVersion }}/VBoxGuestAdditions_{{ .pack.hostVersion }}.iso
      todir: /tmp
      unpack: false
    after: "{{ .templates }}/install.sh"
  - shell:
      cmd: "VBoxControl --nologo guestproperty get /VirtualBox/GuestInfo/Net/0/MAC | cut -d: -f2 | sed -e 's/^[[:space:]]*//' | sed 's/../&:/g;s/:$//'"
      out: mac1
  - shell:
      cmd: "VBoxControl --nologo guestproperty get /VirtualBox/GuestInfo/Net/1/MAC | cut -d: -f2 | sed -e 's/^[[:space:]]*//' | sed 's/../&:/g;s/:$//'"
      out: mac2


command:
  hostdata: "{{ .templates }}/hostdata.sh"


  
